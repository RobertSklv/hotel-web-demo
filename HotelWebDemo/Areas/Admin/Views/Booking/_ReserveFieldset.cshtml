@using HotelWebDemo.Models.Components.Admin.Tables
@using HotelWebDemo.Models.Database
@using HotelWebDemo.Models.ViewModels

@model BookingRoomSelectListingModel

@{
    Layout = "_FieldsetLayout";
    ViewData["Legend"] = "Rooms reservation";
    ListingModel<Room>? roomListing = ViewData["RoomListing"] as ListingModel<Room>;
}

<div id="reserved-rooms">
    @if (Model.RoomsToReserve != null)
    {
        foreach (int roomId in Model.RoomsToReserve)
        {
            <input type="hidden" name="@nameof(BookingRoomSelectListingModel.RoomsToReserve)" value="@roomId" />
        }
    }

    @foreach (Room r in Model.ReservedRooms ?? new())
    {
        <div class="card">
            <div class="card-title">
                <h2>@r.Category?.Name</h2>
            </div>
            <dl>
                <dt>Number</dt>
                <dd>@r.Number</dd>
                <dt>Capacity</dt>
                <dd>@r.Capacity</dd>
            </dl>
        </div>
    }
</div>

@if (roomListing != null)
{
    <partial name="_Table" model="@roomListing.Table" />
}

<button id="refresh-btn" asp-action="ReserveRooms" type="submit" class="btn btn-lg btn-primary mt-4 px-5 py-3 fw-bold d-none"></button>